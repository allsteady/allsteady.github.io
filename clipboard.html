<!DOCTYPE HTML>
<HTML>
<HEAD>
	<TITLE>CLIPBOARD</TITLE>
	<META charset="UTF-8">
	<META http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
	<SCRIPT src="http://code.jquery.com/jquery-1.11.2.js"></SCRIPT>
	<SCRIPT>
		console = window.console || {log:function(){}};
		
		function displayType( msg ) {
			var $elem = $("#typeInfo");
			$elem.val( msg );
		}

		function displayContent( content ) {
			var $elem = $("#elm1");
			$elem.val( content );
		}

		function handlepaste (elem, e) {
			var savedcontent = elem.innerHTML;
			if (e && e.clipboardData && e.clipboardData.getData) {
			// Webkit - get data from clipboard, put into editdiv, cleanup, then cancel event
				if (/text\/html/.test(e.clipboardData.types)) {
					elem.innerHTML = e.clipboardData.getData('text/html');
				} else if (/text\/plain/.test(e.clipboardData.types)) {
					elem.innerHTML = e.clipboardData.getData('text/plain');
				} else {
					elem.innerHTML = "";
				}
				
				var types =  e.clipboardData.types;
				if ( types ) {
					var temps = "[" + e.clipboardData.types.length + "] " ;				
					for ( var i = 0 ; i < types.length ; i++ ) {
						temps += types [ i ] + " " ;
					}
						
					displayType( temps );
				}


				waitforpastedata(elem, savedcontent);
				
				if (e.preventDefault) {
					e.stopPropagation();
					e.preventDefault();
				}
				
				return false;
			} else {
			// Everything else - empty editdiv and allow browser to paste content into it, then cleanup
				elem.innerHTML = "";
				displayType( "Can not access clipboard" );
				waitforpastedata(elem, savedcontent);
				return true;
			}
		}

		function waitforpastedata (elem, savedcontent) {
			if (elem.childNodes && elem.childNodes.length > 0) {
				processpaste(elem, savedcontent);
			} else {
				that = {
					e: elem,
					s: savedcontent
				}
				that.callself = function () {
					waitforpastedata(that.e, that.s);
				}
				setTimeout(that.callself,20);
			}
		}

		function processpaste (elem, savedcontent) {
			pasteddata = elem.innerHTML;
			elem.innerHTML = savedcontent;
			displayContent( pasteddata );
		}

		function viewInPage( id ) {
			var newWindow,
				data = "<p>null</p>",
				elem = document.getElementById( id ),
				scriptTag = "<script src=\"http://code.jquery.com/jquery-1.11.2.js\"><\/script>";
			if ( id ) {
				data = elem.value;
			}
					
			if ( /<\/head>/i.test(data) ) {
				data.replace( /<\/head>/i, scriptTag + "\n</head>\n");
			} else {
				data = scriptTag + data;
			}
			newWindow = window.open("", "");
			newWindow.document.write( data );
		}
	</SCRIPT>
	<STYLE type="text/css">
		div {
			border: 1px solid black;
			height: 60px;
			width: 70%;
		}
		textarea {
			width: 70%;
			height: 300px;
			border: 1px solid black;
		}
	</STYLE>
</HEAD>
<BODY style="padding-left:10px;">
	<DIV id="pasteHere" contenteditable="true" onpaste="handlepaste(this, event)" style="border-style: dotted;border-width: 3px;padding: 4px;">
Paste Here...
	</DIV>
	<br>
	<DIV style="vertical-align: middle;padding-top: 15px;padding-left: 5px;height: 36px;">
		<span style="width:30%">Data Type : </span>
		<input id="typeInfo" name="typeInfo" type="text" style="width: 70%;">
		</input>
	</DIV>
	<br>
	<br>
	<span>HTML : </span>
	<input type="button" value="view" onclick="viewInPage('elm1')">
	<br>
	<textarea id="elm1" name="elm1"  >
	</textarea>
	<br>
	</br>
	<span>Body</span>
	<input type="button" value="view" onclick="viewInPage('elm2')">
	<br>
	<textarea id="elm2" name="elm2"  >
	</textarea>
</BODY>
</HTML>


