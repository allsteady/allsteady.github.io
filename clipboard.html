<!DOCTYPE html>
<html>
	<head>
		<title>
			Clipboard Test
		</title>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<style type="text/css">
		#elm1, #elm2{
			width: 60%;
			height:300px;
			border-style:solid;
			border-color:black;
		}
		a:hover {
			color:#red;
		}
		</style>
	</head>
	<body id="dropArea2">
		<button onclick="addForm()" value="Add">Add Form</button>
		<button onclick="init()" value="Add">Clear</button>
		<button id="copyBtn"  value="Copy">Copy Content</button>
		<br>
		<span>clipboard data types : </span>
		<input id="elem3" name="elem3" type="text" style="width: 50%;"> </input>
		<br>
		<br>
		<span>HTML : </span> <input type="button" value="view" onclick="viewInPage('elm1')"><br>
		<textarea id="elm1" name="elm1"  >
		</textarea>
		<br></br>
		<span>RTF</span> <a >view html</a>  <input type="button" value="view" onclick="viewInPage('elm2')"> <br>
		<textarea id="elm2" name="elm2"  >
		</textarea>
		<br>
		<br>
		<div id="dropArea" style="width:60%;height:80px;border-style:solid;border-color:black;"></div>
		<div id='div' contenteditable='true' onpaste='handlepaste(this, event)'>Paste</div>
		<script>
			console = window.console || {log:function(){}};
			var elem = document.getElementById("copyBtn");
			var elm1 = document.getElementById("elm1");
			if ( elem ) {
				elem.addEventListener("click", copyContents );
				elm1.addEventListener("paste", pasteHandle );
			}

			function copyContents( event ) {
				var cBoard, dataTransfer;
				if ( event.dataTransfer ) {
					dataTransfer = event.dataTransfer;
					console.log( dataTransfer );
				} else {
					alert("Does not know...");
				}
			}

			function viewInPage( id ) {
				var data = "<p>null</p>",
					elem = document.getElementById( id );
				if ( id ) {
					data = elem.value;
				}
				
				var newWindow = window.open("", "");
				newWindow.document.write( data );
			}

			function init(){
				var elem1 = document.getElementById("elm1"),
					elem2 = document.getElementById("elm2"),
					elem3 = document.getElementById("elem3");
				elem1.value = "";
				elem2.value= "";
				elem3.value = "";
			}

			function pasteHandle( e ) {
				var types, data;
				init();
				var typeInput = document.getElementById("elem3");
				if (e && e.clipboardData && e.clipboardData.getData) {
					// alert(" have a clipboard data.");
					types =  e.clipboardData.types;
					if ( types ) {
						var temps = "[" + e.clipboardData.types.length + "] " ;				
						for ( var i = 0 ; i < types.length ; i++ ) {
							temps += types [ i ] + " " ;
						}
						
						typeInput.value = temps;
					} else {
						typeInput.value = "null"
					}


					var htmlData = e.clipboardData.getData("text/html");
					var text = document.getElementById("elm1");
					text.value = htmlData;
					
					var rtfData = e.clipboardData.getData("text/rtf");
					if ( rtfData != null ) {
						var rtf = document.getElementById("elm2");
						rtf.value = rtfData;
					} else {

					}
				} else {
					alert(" does not have a clipboard data.");
					typeInput.value = "does not have a clipboard data.";
				}


				e.stopPropagation();
				e.preventDefault();
			}

		
		</script>
	</body>

</html>